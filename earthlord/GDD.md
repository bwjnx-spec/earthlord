# 游戏设计文档 (GDD)
## 地球新主 (Earth Lord)

---

## 1. 游戏概述

### 1.1 游戏定位
**类型**：LBS + 生存建造 + 经营策略
**平台**：iOS
**目标受众**：18-45岁，喜欢户外活动和策略经营的玩家

### 1.2 核心玩法
玩家在末日世界中，通过真实行走用GPS圈出领地，探索现实世界中的POI搜刮资源，建造设施经营领地，与其他玩家交易和社交，最终成为废土之王。

### 1.3 游戏特色
1. **真实世界融合**：现实地理位置转化为游戏内容
2. **运动激励**：鼓励玩家户外活动和探索
3. **深度经营**：完整的资源-建造-交易经济循环
4. **社交互动**：多样化的社交玩法
5. **希望朋克美学**：废土+希望的独特视觉风格

---

## 2. 世界观与剧情

### 2.1 世界观设定

#### 2.1.1 历史背景
**2048年 - 终末战争**
- 第三次世界大战爆发
- 核武器、生化武器、AI武器全面使用
- 72小时内，全球主要城市化为废墟
- 99%的人口消失

**2049-2050年 - 黑暗时期**
- 幸存者在地下、掩体中苟延残喘
- 资源匮乏，秩序崩溃
- 辐射、疫病、变异生物威胁

**2051年 - 新纪元**
- 辐射逐渐消退，地表可以生存
- 幸存者走出掩体，开始重建
- 《新开拓者协议》诞生

#### 2.1.2 核心法则

**《新开拓者协议》**
> "在旧世界的废墟之上，不再有国家、政府和旧秩序。
> 凡以双足丈量之无主土地，皆为开拓者所有。
> 凭劳动获取资源，凭智慧建立家园，凭实力守护领地。
> 这是新世界的法则，这是开拓者的权利。"

**核心原则**：
1. **领地所有权**：亲自行走圈出的土地归个人所有
2. **资源归属**：搜刮获得的资源归搜刮者所有
3. **自由交易**：任何物品都可以自由交易
4. **实力为尊**：强者可以守护更多领地

#### 2.1.3 视觉风格：希望朋克 (Hope Punk)

**色彩基调**：
- 主色调：灰色、棕色（废土感）
- 强调色：绿色、蓝色、金色（希望感）
- 光影：暖色调光线，营造希望氛围

**视觉元素**：
- ❌ 纯粹的黑暗绝望（不是这个）
- ✅ 废墟中长出的绿植
- ✅ 破败建筑上的霓虹标志
- ✅ 污染天空下的一缕阳光
- ✅ 残破装备上的精心装饰

**UI风格**：
- 扁平化 + 科技感
- 半透明卡片设计
- 荧光绿色按钮和提示
- 手绘风格图标

### 2.2 主线剧情

#### 第一章：觉醒
- 玩家从掩体中醒来
- 收到《新开拓者协议》广播
- 学习如何圈地和搜刮
- **目标**：圈出第一块领地，建造第一个庇护所

#### 第二章：扩张
- 遇到其他开拓者
- 学习交易和社交
- 领地逐渐扩大
- **目标**：拥有3块领地，建造5个不同建筑

#### 第三章：繁荣
- 建立贸易网络
- 研究科技树
- 参与排行榜竞争
- **目标**：进入区域排行榜前100

#### 第四章：传奇（持续更新）
- 大型联盟战争
- 世界boss事件
- 季节性活动
- **目标**：成为传奇开拓者

---

## 3. 核心游戏循环

### 3.1 短期循环（每次游戏，15-30分钟）

```
打开游戏
    ↓
查看领地状态（收取资源）
    ↓
外出探索（圈地/搜刮POI）
    ↓
回到领地（建造/升级）
    ↓
社交互动（聊天/交易）
    ↓
完成每日任务
    ↓
离开游戏（等待建造完成）
```

### 3.2 中期循环（每周）

```
周一：新的每周任务
    ↓
周中：完成任务，积累资源
    ↓
周末：参与周末活动
    ↓
周日：领取每周奖励，准备下周
```

### 3.3 长期循环（每月/每季度）

```
月初：新赛季开始
    ↓
月中：排行榜竞争
    ↓
月末：赛季结算，领取奖励
    ↓
新月：新赛季内容更新
```

---

## 4. 详细玩法设计

### 4.1 GPS圈地系统

#### 4.1.1 圈地玩法

**操作流程**：
1. 打开地图界面
2. 点击"开始圈地"按钮
3. 开始行走，实时显示轨迹
4. 回到起点（误差<10米）或手动点击"完成"
5. 系统计算面积并验证有效性
6. 消耗能量值完成圈地

**圈地规则**：
- 最小面积：100㎡（避免过小无意义的领地）
- 最大面积：100,000㎡（单次）
- 不能与已有领地重叠（包括自己和他人）
- 必须形成闭合多边形
- GPS精度要求：<10米

**能量系统**：
- 每个玩家有100点能量值
- 圈地消耗能量 = 面积(㎡) / 1000
- 例如：圈1000㎡消耗1点能量
- 能量每小时恢复5点，最大100点
- VIP会员恢复速度翻倍

#### 4.1.2 领地价值

**领地属性**：
1. **地理位置**：
   - 市中心：POI密集，价值高
   - 郊区：面积大，适合建造
   - 特殊地点：地标建筑附近，稀缺性高

2. **资源产出**：
   - 不同位置产出不同资源
   - 公园附近：木材、水源
   - 商业区：废弃物资
   - 工业区：金属、零件

3. **战略价值**：
   - 连接多块领地形成区域
   - 控制关键通道
   - 靠近重要POI

#### 4.1.3 领地管理

**领地操作**：
- **重命名**：自定义领地名称
- **标记**：设置颜色标签分类
- **共享**：设置公开/私密
- **放弃**：删除领地（返回50%资源）

**领地显示**：
- 地图上高亮显示
- 显示领地边界
- 显示建筑图标
- 显示领地名称

---

### 4.2 探索与收集系统

#### 4.2.1 POI发现机制

**POI来源**：
- Apple Maps真实POI数据
- 游戏自定义特殊地点
- 限时活动地点

**发现规则**：
- 进入50米范围自动发现
- 首次发现获得"发现奖励"
- POI在地图上持久显示
- 记录发现时间和次数

**POI分级**：
1. ⚪ 普通POI（90%）：
   - 常见资源
   - 刷新周期：6小时

2. 🔵 稀有POI（8%）：
   - 稀有资源
   - 刷新周期：12小时

3. 🟣 史诗POI（1.8%）：
   - 高级资源
   - 刷新周期：24小时

4. 🟠 传说POI（0.2%）：
   - 极品装备
   - 刷新周期：72小时
   - 全服公告

#### 4.2.2 搜刮玩法

**搜刮流程**：
1. 靠近POI（<50米）
2. 点击POI图标
3. 选择搜刮方式：
   - 快速搜刮（10秒，70%收益）
   - 仔细搜刮（60秒，100%收益）
   - 专业搜刮（需工具，120秒，150%收益）
4. 等待搜刮进度条
5. 获得资源，背包自动收纳

**搜刮限制**：
- 每个POI每6小时可搜刮一次
- 消耗行动点（初始50点，每小时恢复5点）
- 背包满时无法搜刮

**搜刮事件**：
- 10%概率触发随机事件：
  - 💎 意外发现（额外资源）
  - ⚠️ 危险陷阱（损失生命值）
  - 👥 遇到NPC（对话/交易）
  - 📦 神秘宝箱（开启需要钥匙）

#### 4.2.3 资源系统

**资源分类**：

1. **基础资源**（Common）：
   - 🥫 食物：维持生命值
   - 💧 水源：维持生命值
   - 🪵 木材：建造材料
   - 🪨 石料：建造材料
   - 🧵 布料：制作装备

2. **高级资源**（Uncommon）：
   - 🔩 金属零件：高级建造
   - ⚙️ 机械部件：科技研究
   - 💊 药品：治疗恢复
   - 🔋 能源电池：供能
   - 🧪 化学试剂：合成配方

3. **稀有资源**（Rare）：
   - 💎 稀有矿石：珍贵材料
   - 📡 电子元件：高科技建筑
   - 🧬 生物样本：基因科技
   - 📚 知识书籍：解锁科技
   - 🗝️ 特殊钥匙：开启宝箱

4. **货币资源**：
   - 💰 废土币：主要货币（游戏内获得）
   - 💎 钻石：高级货币（充值获得）

**资源获取途径**：
- 搜刮POI（主要）
- 领地产出（被动）
- 任务奖励
- 交易获得
- 活动奖励

---

### 4.3 建造系统

#### 4.3.1 建筑分类

**生产建筑**：
1. 🌾 **农田**（Lv1-10）
   - 生产：食物
   - 产量：10-100个/小时
   - 建造成本：木材×50，水源×30
   - 建造时间：30分钟
   - 占地：2×2格

2. 💧 **净水厂**（Lv1-10）
   - 生产：净水
   - 产量：20-200个/小时
   - 建造成本：金属×30，零件×10
   - 建造时间：1小时
   - 占地：3×3格

3. ⚡ **发电站**（Lv1-10）
   - 生产：能源
   - 产量：50-500单位/小时
   - 建造成本：机械部件×20，电路×15
   - 建造时间：2小时
   - 占地：4×4格

4. 🏭 **工厂**（Lv1-10）
   - 生产：零件、工具
   - 产量：根据配方
   - 建造成本：金属×100，机械×50
   - 建造时间：3小时
   - 占地：5×5格

**功能建筑**：
1. 🏪 **交易所**（Lv1-5）
   - 功能：挂单交易，降低手续费
   - Lv1：10%手续费
   - Lv5：2%手续费
   - 建造成本：木材×100，金属×50
   - 建造时间：1小时
   - 占地：3×3格

2. 📡 **通讯塔**（Lv1-5）
   - 功能：扩展通讯范围，解锁频道
   - Lv1：1km范围，2个自定义频道
   - Lv5：10km范围，10个自定义频道
   - 建造成本：电子元件×50，金属×100
   - 建造时间：2小时
   - 占地：2×2格

3. 🔬 **实验室**（Lv1-5）
   - 功能：研究科技，解锁配方
   - 每级解锁新科技树分支
   - 建造成本：机械×100，电子×50，书籍×10
   - 建造时间：4小时
   - 占地：4×4格

4. 📦 **仓库**（Lv1-10）
   - 功能：扩展存储容量
   - Lv1：+50格
   - Lv10：+500格
   - 建造成本：木材×200，金属×100
   - 建造时间：30分钟
   - 占地：3×3格

**防御建筑**：
1. 🏰 **防御塔**（Lv1-10）
   - 功能：防止领地被掠夺
   - 防御值：100-1000
   - 建造成本：石料×200，金属×100
   - 建造时间：2小时
   - 占地：2×2格

2. 🚧 **围墙**（Lv1-5）
   - 功能：标记领地边界，增加防御
   - 防御值：50-250
   - 建造成本：石料×100/单元
   - 建造时间：10分钟/单元
   - 占地：1格宽

**特殊建筑**：
1. 🏠 **庇护所**（必建，Lv1-10）
   - 功能：基础建筑，恢复生命值
   - 每个领地必须有一个
   - 升级提升恢复速度
   - 建造成本：木材×100，布料×50
   - 建造时间：1小时
   - 占地：3×3格

2. 🎪 **集市**（Lv1-3）
   - 功能：吸引NPC商人
   - 每天刷新商品
   - 建造成本：木材×500，金属×200
   - 建造时间：5小时
   - 占地：5×5格

#### 4.3.2 建造机制

**建造流程**：
1. 选择领地
2. 进入建造模式
3. 选择建筑类型
4. 拖动放置位置（检测碰撞）
5. 确认建造（扣除资源）
6. 开始倒计时

**建造加速**：
- 使用钻石立即完成
- 使用"加速道具"减少时间
- VIP会员建造速度+20%

**建造限制**：
- 每块领地最多20个建筑
- 建筑之间需要1格间距
- 必须有至少一个庇护所

#### 4.3.3 建筑升级

**升级系统**：
- 每个建筑最高10级（部分5级）
- 每升1级：
  - 产量/效果+10%
  - 消耗资源×1.5倍
  - 升级时间×1.2倍

**升级收益**：
| 等级 | 产量倍率 | 累计资源消耗 | 升级时间 |
|------|----------|--------------|----------|
| Lv1  | 1.0x     | 基础         | 基础     |
| Lv2  | 1.1x     | 1.5倍        | 1.2倍    |
| Lv3  | 1.2x     | 3倍          | 1.4倍    |
| Lv5  | 1.4x     | 8倍          | 2倍      |
| Lv10 | 2.0x     | 50倍         | 5倍      |

#### 4.3.4 建筑状态

**状态类型**：
1. 🏗️ **建造中**：
   - 显示倒计时
   - 可加速完成
   - 无法使用

2. ✅ **正常运行**：
   - 正常产出资源
   - 可收取/升级

3. ⚠️ **需要维护**：
   - 产出效率降低50%
   - 提示维护提醒
   - 需要消耗维护资源

4. 🔧 **维护中**：
   - 临时无法使用
   - 显示维护倒计时

5. ❌ **损坏停运**：
   - 完全停止产出
   - 必须修复才能使用
   - 修复需要资源+时间

**维护机制**：
- 每48小时需要维护一次
- 维护成本 = 建造成本 × 10%
- 超过72小时未维护 → 损坏

---

### 4.4 交易系统

#### 4.4.1 交易方式

**1. 玩家直接交易**：
- 面对面交易（100米内）
- 双方放入物品
- 双方确认后成交
- 无手续费

**2. 交易所挂单**：
- 挂单出售物品
- 设置价格和数量
- 其他玩家购买
- 手续费：5%（有交易所建筑可降低）

**3. 拍卖系统**：
- 竞价拍卖稀有物品
- 起拍价 + 竞价增幅
- 倒计时结束，最高价得
- 手续费：10%

**4. NPC商店**：
- 系统固定商店
- 出售基础物资
- 价格略高于市场价
- 无限库存

**5. 流动商人**：
- 随机刷新在POI附近
- 出售稀有物品
- 价格浮动
- 限时限量

#### 4.4.2 交易货币

**废土币**（主货币）：
- 游戏内获取
- 用于大部分交易
- 获取途径：
  - 出售物品
  - 完成任务
  - 领地产出
  - 击杀怪物

**钻石**（高级货币）：
- 充值获得
- 用于高级功能：
  - 购买稀有物品
  - 建造加速
  - VIP订阅
  - 皮肤装扮

**以物易物**：
- 玩家间直接交换物品
- 无需货币
- 适合特殊需求

#### 4.4.3 市场价格

**价格机制**：
- 供需关系自动调节
- 系统参考价 ± 30%
- 稀有度影响基础价格

**参考价格表**：
| 资源 | 品质 | 参考价（废土币） |
|------|------|------------------|
| 食物 | 普通 | 10              |
| 水源 | 普通 | 8               |
| 木材 | 普通 | 15              |
| 金属零件 | 高级 | 100         |
| 稀有矿石 | 稀有 | 500         |
| 电子元件 | 稀有 | 800         |
| 知识书籍 | 史诗 | 2000        |

---

### 4.5 社交系统

#### 4.5.1 好友系统

**好友功能**：
- 添加好友（ID/附近玩家）
- 好友列表（最多200人）
- 查看好友领地
- 互相赠送礼物
- 好友排行榜

**好友特权**：
- 可进入好友领地参观
- 降低交易手续费（-2%）
- 共同完成好友任务
- 互相协助建造（加速5%）

#### 4.5.2 聊天系统

**频道类型**：
1. 🌍 **世界频道**：
   - 全服玩家可见
   - 发言冷却：30秒
   - 字数限制：100字

2. 📍 **区域频道**：
   - 5km范围内玩家
   - 发言冷却：10秒
   - 字数限制：200字

3. 👥 **联盟频道**：
   - 仅联盟成员
   - 无发言冷却
   - 字数限制：500字

4. 💬 **私聊**：
   - 一对一聊天
   - 支持语音消息
   - 无限制

**聊天功能**：
- 文字消息
- 表情符号（50+）
- 物品链接（点击查看）
- 坐标分享（点击导航）
- @提醒（频道内）
- 语音消息（最长60秒）

**管理功能**：
- 屏蔽玩家
- 举报系统
- 敏感词过滤
- 防刷屏机制

#### 4.5.3 联盟系统

**联盟创建**：
- 花费：10,000废土币
- 成员上限：初始50人，最高200人
- 需要设置：
  - 联盟名称
  - 联盟徽章
  - 加入条件（等级/领地数）

**联盟功能**：
- 联盟仓库（共享资源）
- 联盟科技（全员加成）
- 联盟任务（集体目标）
- 联盟战争（领地争夺）
- 联盟排行榜

**联盟职位**：
- 👑 会长（1人）：所有权限
- ⭐ 副会长（3人）：大部分权限
- 🎖️ 长老（10人）：审批成员
- 👤 成员：基础权限

#### 4.5.4 PTT语音呼叫

**呼叫方式**：
- 按住按钮说话
- 松开自动发送
- 实时传输

**呼叫范围**：
- 根据通讯塔等级
- Lv1：1km范围
- Lv5：10km范围
- VIP：全地图

**语音质量**：
- 采样率：16kHz
- 编码：Opus
- 延迟：<500ms

---

## 5. 数值系统

### 5.1 玩家属性

**等级系统**：
- 最高等级：100级
- 升级经验：
  - Lv1→2：100 EXP
  - Lv2→3：150 EXP
  - 经验需求递增：EXP = 100 × 1.15^(level-1)

**经验获取**：
- 圈地：面积(㎡) / 100 EXP
- 搜刮POI：10-50 EXP
- 建造建筑：建造时间(分钟) EXP
- 完成任务：50-500 EXP

**属性系统**：
- ❤️ 生命值：100（满级200）
- ⚡ 能量值：100（满级150）
- 🎒 背包容量：50（满级200）
- 🏃 行动点：50（满级100）

### 5.2 资源产出

**领地基础产出**：
- 每1000㎡领地每小时产出：
  - 废土币：10个
  - 随机资源：1-3个

**建筑产出**：
- 农田Lv1：10食物/小时
- 净水厂Lv1：20水源/小时
- 发电站Lv1：50能源/小时

**POI产出**：
- 普通POI：3-8个资源
- 稀有POI：10-20个资源
- 史诗POI：30-50个资源
- 传说POI：100+资源 + 特殊奖励

### 5.3 消耗平衡

**生存消耗**（每小时）：
- 食物：2个
- 水源：2个
- 生命值：-1（饥饿时）

**行动消耗**：
- 圈地：能量值（面积/1000）
- 搜刮：行动点5点/次
- 快速移动：能量值10点/km

**建造消耗**（Lv1建筑）：
- 庇护所：木材100，布料50
- 农田：木材50，水源30
- 交易所：木材100，金属50

### 5.4 经济平衡

**每日收入预估**（中度玩家）：
- 领地产出：500废土币
- POI搜刮：300废土币
- 任务奖励：200废土币
- 交易收益：200废土币
- **合计**：1200废土币/天

**每日支出预估**：
- 建造/升级：400废土币
- 交易购买：300废土币
- 维护费用：100废土币
- **合计**：800废土币/天

**净收入**：400废土币/天

---

## 6. 任务与成就系统

### 6.1 每日任务

**任务列表**（每日刷新）：
1. ✅ 登录游戏（奖励：50废土币）
2. 🚶 圈出1块领地（奖励：100废土币，50 EXP）
3. 🔍 搜刮3个POI（奖励：150废土币，80 EXP）
4. 🏗️ 建造/升级1个建筑（奖励：200废土币，100 EXP）
5. 💬 发送10条聊天消息（奖励：50废土币）
6. 🤝 进行1次交易（奖励：100废土币）

**每日任务奖励总计**：
- 废土币：650
- 经验值：230 EXP

### 6.2 每周任务

**任务列表**（每周刷新）：
1. 圈出5块领地（奖励：1000废土币，500 EXP）
2. 搜刮50个POI（奖励：1500废土币，800 EXP）
3. 建造10个建筑（奖励：2000废土币，1000 EXP）
4. 完成20次交易（奖励：800废土币）
5. 添加5个新好友（奖励：500废土币）

### 6.3 成就系统

**成就分类**：

**探索成就**：
- 🗺️ 探索者：发现10/50/100/500个POI
- 🌏 环球旅行家：行走距离100/500/1000km
- 🏔️ 登峰造极：到达海拔最高点

**建造成就**：
- 🏗️ 建筑师：建造10/50/100/500个建筑
- 📈 升级大师：升级建筑到Lv5/10
- 🏰 城市之主：拥有领地面积100万㎡

**社交成就**：
- 👥 社交达人：添加10/50/100个好友
- 💬 话痨：发送1000/10000/100000条消息
- 🤝 交易大亨：完成100/500/1000次交易

**战斗成就**：
- ⚔️ 防御者：成功防御10/50/100次攻击
- 🛡️ 不败之地：连续防御20次不失败

**收集成就**：
- 📦 收藏家：收集所有资源类型
- 💎 富豪：拥有100万废土币
- 🎖️ 传奇：获得所有传说级物品

**成就奖励**：
- 成就点数（用于排行榜）
- 专属称号
- 稀有道具
- 钻石奖励

---

## 7. 活动与赛季

### 7.1 每日活动

**限时POI**（每天12:00-14:00，18:00-20:00）：
- 特定POI资源翻倍
- 随机出现传说级POI
- 击杀概率提升

### 7.2 每周活动

**周末挑战**（周六-周日）：
- 双倍经验
- 建造速度+50%
- 特殊商人出现

**联盟战**（每周五19:00-21:00）：
- 联盟之间争夺领地
- 胜利方获得巨额奖励

### 7.3 月度赛季

**赛季机制**：
- 每月1日开始新赛季
- 赛季排行榜重置
- 赛季专属任务
- 赛季通行证（免费/付费）

**赛季奖励**：
- 根据排名发放奖励
- 赛季专属皮肤
- 赛季限定建筑
- 钻石奖励

---

## 8. 付费设计

### 8.1 订阅制（主要收入）

**月度订阅**（¥30/月）：
- 每日资源礼包（价值¥5）
- 建造时间-20%
- 背包容量+50
- 能量恢复速度×2
- 专属聊天气泡

**年度订阅**（¥298/年，相当于¥24.8/月）：
- 月度订阅所有特权
- 专属皮肤×3
- 专属建筑装饰
- VIP标识
- 每月额外1000钻石

### 8.2 钻石充值

**充值档位**：
- ¥6 → 60钻石
- ¥30 → 300钻石 + 30赠送
- ¥68 → 680钻石 + 100赠送
- ¥128 → 1280钻石 + 300赠送
- ¥328 → 3280钻石 + 1000赠送
- ¥648 → 6480钻石 + 3000赠送

**首充奖励**：
- 首次充值任意金额
- 获得稀有建筑×1
- 传说级装备×1
- 钻石×100

### 8.3 钻石消费

**主要用途**：
- 建造加速（1分钟 = 1钻石）
- 能量恢复（10钻石 = 50能量）
- 购买稀有物品
- 抽奖系统
- 皮肤装扮

### 8.4 广告变现（辅助收入）

**激励视频**：
- 观看广告获得奖励：
  - 能量+10
  - 或免费加速30分钟
  - 或抽奖券×1
- 每天最多5次

### 8.5 付费平衡

**付费优势**：
- 节省时间（加速）
- 更多资源（每日礼包）
- 便利功能（背包扩容）

**不影响公平**：
- ❌ 不出售直接战斗力
- ❌ 不出售独占资源
- ✅ 非付费玩家可通过时间获得一切

---

## 9. 反作弊与安全

### 9.1 GPS作弊检测

**检测方法**：
- 移动速度检测（>100km/h标记为异常）
- GPS漂移检测
- 轨迹合理性分析
- 设备定位源检测

**处罚措施**：
- 第一次：警告，删除异常领地
- 第二次：封禁3天
- 第三次：永久封禁

### 9.2 交易作弊检测

**检测方法**：
- 异常价格检测
- 频繁交易检测
- 多账户关联分析

**处罚措施**：
- 冻结交易功能
- 回收异常收益
- 封禁账号

### 9.3 数据安全

**安全措施**：
- 数据加密传输（HTTPS）
- 敏感数据加密存储
- 定期备份
- 异地容灾

---

## 10. UI/UX设计

### 10.1 主界面布局

**首页**：
- 顶部：头像、等级、货币
- 中部：3D地图视图
- 底部：导航栏（地图/背包/建造/社交/我的）

**地图界面**：
- 全屏地图
- 浮动按钮：
  - 定位
  - 圈地
  - 图层切换
- 底部工具栏：POI筛选

### 10.2 交互设计

**手势操作**：
- 单指拖动：移动地图
- 双指缩放：缩放地图
- 双击：快速缩放
- 长按：显示详情

**反馈设计**：
- 按钮点击：震动+音效
- 操作成功：绿色提示
- 操作失败：红色提示+说明
- 加载中：进度条+骨架屏

### 10.3 新手引导

**引导流程**：
1. 开场动画（世界观介绍）
2. 创建角色（选择头像、昵称）
3. 第一次圈地（手把手教学）
4. 第一次搜刮POI
5. 建造第一个庇护所
6. 完成新手任务链

**引导奖励**：
- 完成引导获得：
  - 1000废土币
  - 各类资源×50
  - 稀有建筑图纸×1
  - 3天VIP体验

---

## 11. 技术实现要点

### 11.1 地图与定位

**技术方案**：
- MapKit地图显示
- Core Location定位
- 融合定位（GPS + WiFi + 基站）
- 定位精度要求：<10米

**性能优化**：
- POI聚合显示（缩小时）
- 瓦片地图缓存
- 异步加载

### 11.2 后端架构

**技术栈**：
- Supabase（BaaS）
- PostgreSQL + PostGIS
- Realtime订阅
- Edge Functions

**数据库设计**：
```sql
-- 用户表
users (
  id uuid primary key,
  email text,
  nickname text,
  level integer,
  exp integer,
  created_at timestamp
)

-- 领地表
territories (
  id uuid primary key,
  user_id uuid references users,
  name text,
  boundary geography(Polygon, 4326),
  area float,
  created_at timestamp
)

-- 建筑表
buildings (
  id uuid primary key,
  territory_id uuid references territories,
  type text,
  level integer,
  position geography(Point, 4326),
  status text,
  created_at timestamp
)

-- 背包表
inventory (
  id uuid primary key,
  user_id uuid references users,
  item_id text,
  quantity integer,
  updated_at timestamp
)
```

### 11.3 实时通讯

**技术方案**：
- Supabase Realtime（WebSocket）
- 频道订阅机制
- 消息队列

**性能优化**：
- 消息分页加载
- 历史消息缓存
- 离线消息同步

---

## 12. 后续版本规划

### Version 1.1（1-2个月）
- [ ] 联盟战争系统
- [ ] 更多建筑类型（20+）
- [ ] 宠物系统
- [ ] 载具系统

### Version 1.2（3-4个月）
- [ ] 多人副本
- [ ] Boss战
- [ ] 公会领地
- [ ] 跨服竞技

### Version 1.3（5-6个月）
- [ ] AR功能
- [ ] 天气系统
- [ ] 季节变化
- [ ] 生态系统

### Version 2.0（长期）
- [ ] 全球服互通
- [ ] 跨平台（Android）
- [ ] PC端同步
- [ ] VR支持

---

## 13. 附录

### 13.1 灵感来源
- Pokémon GO：LBS玩法
- Ingress：领地争夺
- Fallout Shelter：废土题材
- 部落冲突：建造经营

### 13.2 参考资料
- MapKit开发文档
- PostGIS地理数据库
- Supabase实时数据库
- LBS游戏设计最佳实践

---

**文档版本**：v1.0
**创建日期**：2025-12-23
**最后更新**：2025-12-23
**文档负责人**：游戏设计团队
